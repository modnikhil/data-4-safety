<link rel="import" href="/res/app/bower_components/polymer/polymer.html">
<link rel="import"
	href="/res/app/bower_components/iron-flex-layout/iron-flex-layout.html">

<link rel="import"
	href="/res/app/bower_components/neon-animation/neon-shared-element-animatable-behavior.html">
<link rel="import"
	href="/res/app/bower_components/neon-animation/animations/hero-animation.html">
<link rel="import"
	href="/res/app/bower_components/neon-animation/animations/fade-out-animation.html">
<link rel="import"
	href="/res/app/bower_components/iron-list/iron-list.html">
<link rel="import"
	href="/res/app/bower_components/iron-icon/iron-icon.html">
<link rel="import"
	href="/res/app/bower_components/iron-icons/iron-icons.html">
 
<link rel="import" href="../res/app/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import"
	href="/res/app/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import"
	href="/res/app/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import"
	href="/res/app/bower_components/paper-menu/paper-menu.html">
<link rel="import"
	href="/res/app/bower_components/paper-item/paper-item.html"> 
<link rel="import"
	href="/res/app/bower_components/paper-icon-button/paper-icon-button.html">  
<link rel="import"
	href="/res/app/bower_components/paper-button/paper-button.html">
<link rel="import"
	href="/res/app/bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="/res/app/bower_components/google-signin/google-signin.html">
<link rel="import" href="/res/app/bower_components/google-signin/google-signin-aware.html">	
 

<dom-module id="D4S-Header">

<template>
 
<paper-toolbar> 
<div class="horizontal-section">
    <paper-menu-button>
      <paper-icon-button icon="menu" class="dropdown-trigger" alt="menu"></paper-icon-button>
      <paper-menu class="dropdown-content">            
      <paper-item onClick="location.href='/Country?Req=Page'">Country</paper-item>
      <paper-item onClick="location.href='/Clndr?Req=Page'">Calendar</paper-item>
      <paper-item onClick="location.href='/DeathCause?Req=Page'">Death Cause</paper-item>
      <paper-item onClick="location.href='/Ppln?Req=Page'">Population</paper-item>
      <paper-item onClick="location.href='/Death?Req=Page'">Death</paper-item>
      <paper-item onClick="location.href='/ui/who/ChartWHO.html'">Population Chart</paper-item>               
      </paper-menu>
    </paper-menu-button>
</div> 
<!-- flex class forces span to fill space between icons -->
<span class="flex"> <h2>Data 4 Safety</h2> </span>
<paper-icon-button id="morebutton" icon="home" onClick="location.href='/index.html'"> </paper-icon-button>

<google-signin brand="google" client-id="215273598483-ucab4fst2qmf99oms68j9d1n8q032aq1.apps.googleusercontent.com" height="short"></google-signin>
<p><button on-click="disconnect">Google Disconnect</button></p>
</paper-toolbar> 
<template id="awareness" is="dom-bind">

<google-signin-aware
        scopes="{{scope}}"
        signed-in="{{signedIn}}"
        offline="{{offline}}"
        is-authorized="{{isAuthorized}}"
        need-additional-auth="{{needAdditionalAuth}}"
        on-google-signin-aware-success="handleSignIn"
        on-google-signin-offline-success="handleOffline"
        on-google-signin-aware-signed-out="handleSignOut">
</google-signin-aware>
</template> 
</template> 
<script>
Polymer({
    is: 'D4S-Header',
    listeners: {
        'handleSignIn': 'handleSignIn',
        'handleSignOut': 'handleSignOut'
      },
    properties: {
        logInName: {
            type: String,
            value: "N/A"
        },
        logInStatus: {
            type: String,
            value: "Not granted"
        },
        offlineCode: {
            type: String,
            value: "No offline login."
        }
    },
    handleSignIn: function(e) {
    	logInStatus = 'Signin granted';
    	logInName = gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getName();

    },
    handleSignOut: function(e) {
    	logInStatus = 'Signed out';
    	logInName = 'N/A';
    	gapi.auth2.getAuthInstance().signOut();
    }
  });
</script>  
 <script> 
//var aware = document.querySelector('#awareness');
//aware.status = 'Not granted';
//aware.offlineCode = 'No offline login.';
//aware.userName = 'N/A';
//document.addEventListener('handleSignIn', function(response) {
//	aware.status = 'Signin granted';
//	aware.userName = gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile().getName();
// });
//document.addEventListener('handleOffline', function(response) {
//	aware.offlineCode = response.detail.code;
//});
//document.addEventListener('handleSignOut', function(response) {	 
//	aware.status = 'Signed out';
  // console.log('[Aware] Signout Response', response);
//  aware.userName = 'N/A';
//});
//document.addEventListener('disconnect', function(response) {	 
//  var b = document.querySelector('google-signin');
//  var currentUser = gapi.auth2.getAuthInstance().currentUser.get();
//  if (currentUser) {
//    currentUser.disconnect();
//  }
//  gapi.auth2.getAuthInstance().signOut();
//});
 </script> 
</dom-module>





